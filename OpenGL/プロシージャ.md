# OpenGLってなんだい

ハードウェアの持つ3次元コンピューターグラフィックス関連の演算機能をソフトウェアから呼び出すための  
規約を定めたインターフェイス(API)標準の1つ。  
オペレーティングシステムを特定しない、ソフトウェアインターフェイス。つまりOS(windowsとかmac)に関係なく使え(directxはwindowsだけ)、

コンピューターにGPUが搭載されている場合にはその機能を直接呼び出すことができるので、  
通常のソフトウェアのようにCPUだけで処理する場合に比べ格段に校則に処理することができる。  
GPU内部の動作を細かく記述することができる独自の言語(GLSL)を規定しており、開発者が独自のプログラマブルシェーダーを作成して対応GPUに転送することで様々な表現を行うことができる。

---

## GLFW

GLFWはOpenGLの`補助ライブラリ`で、
- ウィンドウ管理や入力デバイスの制御
- できる限りシンプルな機能構成
- ずっとメンテされてる

といった特徴がある。

## GLEW

GLEWはOpenGLの`補助ライブラリ`。
- OpenGLの拡張機能のプロシージャを取得
- 複雑な取得作業も単純化
- シェーダーとか殆どのモダンな機能は拡張機能なのでGLEWは必須

といった感じ。
ちなみにOpenGLの拡張機能取得はそれ自体が結構面倒なので、それを簡略化してくれるGLEWは  
マルチプラットフォームを視野に入れていなくても十分有用である。

---

## GLFWの初期化

`glfwInit()`でGLFWの初期化を行います。  
失敗するとnullptrが返ってくるよ。

---
## ウィンドウの初期化

`glfwCreateWindow(int width,int height,const char* title,GLFWmonitor* monitor,GLFWwindow* share)`  

GLFWのウィンドウを作成します。戻り値は作成したウィンドウのハンドル(`GLFWwindow*`)  
ウィンドウが開かなければnullを返す。

- width  
作成するウィンドウの横幅の画素数
- height  
作成するウィンドウの高さの画素数
- title  
作成するウィンドウのタイトルバーに表示する文字列。文字コードはUTF-8
- monitor  
ウィンドウをモニタの全面に表示(フルスクリーン)するとき、表示するモニタを指定する。  
フルスクリーンモードでなければNULLを指定する。

- share  
引数shareにほかのウィンドウハンドルを指定すれば、そのウィンドウとテクスチャなどのリソースを共有をする。  
nullを指定すれば、リソースの共有は行わない。

---

## ウィンドウを処理対象に

`void glfwMakeContextCurrent(GLFWwindow *const window)`  
引数`window`に指定したハンドルのウィンドウのレンダリングコンテキストをカレント(処理対象)にします。  
レンダリングコンテキストは描画に用いられる情報で、ウィンドウごとに保持されます。

---

## 背景色

`void glClearColor(GLfloat R, GLfloat G, GLfloat B, GLfloat A)`  
0.0 ～ 1.0

---

## メインループ

ウィンドウが閉じられるまでwhileでループさせます。ウィンドウが閉じられたかどうかは  
`glfwWindowShouldClose()`関数で調べます。  
このループでは、最初に`glClear()`関数を使って画面(フレームバッファのカラーバッファ)を消去します。  
その後、そこにOpenGLにより図形の描画を行います。  
描画が終わったら`glfwSwapBuffers()`関数を実行して、図形を描画したカラーバッファと現在図形を表示している  
カラーバッファを入れ替えます。この処理は`ダブルバッファリング`といいます。

---

## バッファについて

バッファは一般に緩衝器と訳され、二つのものの一方からもう一方に何らかの影響を与える状況にあるとき、  
この二つの間に入って影響の仲立ちをするもののことをいいます。  
OpenGLにおけるバッファは、`データを次の処理に引き渡すために用いるメモリ`のことを差します。  
OpenGLではいろいろな種類のバッファを使用しますが、ここで説明しているバッファは、  
描画した図形を画面に表示するために用いるフレームバッファのカラーバッファです。


図形は`フレームバッファのカラーバッファ`に描画されます。  
このカラーバッファの内容が読みだされて画面に表示されます。  
ここでフレームバッファへの描画と読みだしを同時に行うと、表示にちらつきが発生してしまいます。  
`ダブルバッファリング`はカラーバッファを二つ用意しておいて、一方を表示している間にもう一方に描画する手法です。  
この描画が完了し、かつ直前の画面表示が完了した時点(垂直同期タイミング、V-Sync)でこの二つのカラーバッファを  
入れ替えることでちらつきの発生を抑えます。